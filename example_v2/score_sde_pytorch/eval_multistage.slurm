#!/bin/bash
# The interpreter used to execute the script
#“#SBATCH” directives that convey submission options:
#SBATCH --job-name=UNI
#SBATCH --nodes=1
#SBATCH --mem=20GB
#SBATCH --time=01-00:00:00
#SBATCH --account=qingqu1
#SBATCH --partition=spgpu
#SBATCH --gpus=a40:1
#SBATCH --output=uniformv2_eval.out
#SBATCH --cpus-per-task=8
echo $EXP_FEWER_STEPS
module purge
module load cuda/11.7.1 cudnn/11.7-v8.7.0
eval "$(conda shell.bash hook)"
conda activate dpm2
cd /home/yifulu/work/dpm-solver/example_v2/score_sde_pytorch
#torchrun --nproc_per_node=1 --master_port=29600 main_interval.py --config "configs/vp/cifar10_ncsnpp_multistage_deep_continuous.py" --config1 "configs/vp/cifar10_ddpmpp_deep_continuous.py" --m1 multistage --m2 dpm_deep --workdir /scratch/qingqu_root/qingqu1/shared_data/dpm_experiments --eval_folder multistage_converge/i0 --config.eval.t_tuples="(0.4420,)" --config.eval.t_converge="(0,1)" --config.eval.begin_ckpt=1 --config.eval.end_ckpt=12 --config.eval.batch_size=1024 --config.sampling.steps=20  --config.sampling.eps=1e-4 --config.eval.converge_epoch=8
#torchrun --nproc_per_node=1 --master_port=29600 main_interval.py --config1 ./configs/vp/cifar10_ncsnpp_multistage_deep_continuous.py --config ./configs/vp/cifar10_ddpmpp_deep_continuous.py --config2 ./configs/vp/cifar10_ddpmpp_deep_continuous.py --m1 dpm_deep --m2 multistage --m3 dpm_deep --workdir /scratch/qingqu_root/qingqu1/shared_data/dpm_experiments --eval_folder multistage_converge/i1 --config.eval.t_tuples="(0.4420,0.6308)" --config.eval.t_converge="(1,0,1)" --config.eval.begin_ckpt=1 --config.eval.end_ckpt=12 --config.eval.batch_size=1024 --config.sampling.steps=20  --config.sampling.eps=1e-4 --config.eval.converge_epoch=8
#torchrun --nproc_per_node=1 --master_port=29600 main_interval.py --config1 ./configs/vp/cifar10_ncsnpp_multistage_deep_continuous.py --config ./configs/vp/cifar10_ddpmpp_deep_continuous.py  --m1 dpm_deep --m2 multistage --workdir /scratch/qingqu_root/qingqu1/shared_data/dpm_experiments --eval_folder multistage_converge/i2 --config.eval.t_tuples="(0.6308,)" --config.eval.t_converge="(1,0)" --config.eval.begin_ckpt=1 --config.eval.end_ckpt=12 --config.eval.batch_size=1024 --config.sampling.steps=20  --config.sampling.eps=1e-4 --config.eval.converge_epoch=8
#torchrun --nproc_per_node=1 --master_port=29600 main_interval.py --config ./configs/vp/cifar10_ncsnpp_multistage_deep_continuous_v2.py --m1 multistage_gn16_v2 --workdir /scratch/qingqu_root/qingqu1/shared_data/multistage --eval_folder multistage_gn16_v2/eval --config.eval.t_tuples="()" --config.eval.t_converge="(0,)" --config.eval.begin_ckpt=1 --config.eval.end_ckpt=12 --config.eval.batch_size=1024 --config.sampling.steps=20  --config.sampling.eps=1e-4 --config.eval.converge_epoch=8
#torchrun --nproc_per_node=1 --master_port=29600 main_interval.py --config "configs/vp/cifar10_ncsnpp_multistage_deep_continuous.py" --config1 "configs/vp/cifar10_ddpmpp_deep_continuous.py" --m1 multistage_gn16 --m2 dpm_deep --workdir /scratch/qingqu_root/qingqu1/shared_data/multistage --eval_folder multistage_gn16/i0 --config.eval.t_tuples="(0.4420,)" --config.eval.t_converge="(0,1)" --config.eval.begin_ckpt=1 --config.eval.end_ckpt=12 --config.eval.batch_size=1024 --config.sampling.steps=20  --config.sampling.eps=1e-4 --config.eval.converge_epoch=8
#torchrun --nproc_per_node=1 --master_port=29600 main_interval.py --config1 ./configs/vp/cifar10_ncsnpp_multistage_deep_continuous.py --config ./configs/vp/cifar10_ddpmpp_deep_continuous.py --config2 ./configs/vp/cifar10_ddpmpp_deep_continuous.py --m1 dpm_deep --m2 multistage_gn16 --m3 dpm_deep --workdir /scratch/qingqu_root/qingqu1/shared_data/multistage --eval_folder multistage_gn16/i1 --config.eval.t_tuples="(0.4420,0.6308)" --config.eval.t_converge="(1,0,1)" --config.eval.begin_ckpt=1 --config.eval.end_ckpt=12 --config.eval.batch_size=1024 --config.sampling.steps=20  --config.sampling.eps=1e-4 --config.eval.converge_epoch=8
#torchrun --nproc_per_node=1 --master_port=29600 main_interval.py --config1 ./configs/vp/cifar10_ncsnpp_multistage_deep_continuous.py --config ./configs/vp/cifar10_ddpmpp_deep_continuous.py  --m1 dpm_deep --m2 multistage_gn16 --workdir /scratch/qingqu_root/qingqu1/shared_data/multistage --eval_folder multistage_gn16/i2 --config.eval.t_tuples="(0.6308,)" --config.eval.t_converge="(1,0)" --config.eval.begin_ckpt=1 --config.eval.end_ckpt=12 --config.eval.batch_size=1024 --config.sampling.steps=20  --config.sampling.eps=1e-4 --config.eval.converge_epoch=8
#torchrun --nproc_per_node=1 main_interval.py --config "configs/vp/cifar10_ncsnpp_multistage_deep_continuous_v2.py" --config1 "configs/vp/cifar10_ddpmpp_deep_continuous.py" --m1 multistage_gn16_v2 --m2 dpm_deep --workdir /scratch/qingqu_root/qingqu1/shared_data/multistage --eval_folder multistage_gn16_v2/i0 --config.eval.t_tuples="(0.4420,)" --config.eval.t_converge="(0,1)" --config.eval.begin_ckpt=1 --config.eval.end_ckpt=12 --config.eval.batch_size=1024 --config.sampling.steps=20  --config.sampling.eps=1e-4 --config.eval.converge_epoch=8
#torchrun --nproc_per_node=1  main_interval.py --config1 ./configs/vp/cifar10_ncsnpp_multistage_deep_continuous_v2.py --config ./configs/vp/cifar10_ddpmpp_deep_continuous.py --config2 ./configs/vp/cifar10_ddpmpp_deep_continuous.py --m1 dpm_deep --m2 multistage_gn16_v2 --m3 dpm_deep --workdir /scratch/qingqu_root/qingqu1/shared_data/multistage --eval_folder multistage_gn16_v2/i1 --config.eval.t_tuples="(0.4420,0.6308)" --config.eval.t_converge="(1,0,1)" --config.eval.begin_ckpt=1 --config.eval.end_ckpt=12 --config.eval.batch_size=1024 --config.sampling.steps=20  --config.sampling.eps=1e-4 --config.eval.converge_epoch=8
#torchrun --nproc_per_node=1 main_interval.py --config1 ./configs/vp/cifar10_ncsnpp_multistage_deep_continuous_v2.py --config ./configs/vp/cifar10_ddpmpp_deep_continuous.py  --m1 dpm_deep --m2 multistage_gn16_v2 --workdir /scratch/qingqu_root/qingqu1/shared_data/multistage --eval_folder multistage_gn16_v2/i2 --config.eval.t_tuples="(0.6308,)" --config.eval.t_converge="(1,0)" --config.eval.begin_ckpt=1 --config.eval.end_ckpt=12 --config.eval.batch_size=1024 --config.sampling.steps=20  --config.sampling.eps=1e-4 --config.eval.converge_epoch=8

#torchrun --nproc_per_node=1 --master_port=29600 main_interval.py --config "configs/vp/cifar10_ncsnpp_multistage_deep_continuous_v3.py" --m1 multistage_gn32_v2  --workdir /scratch/qingqu_root/qingqu1/shared_data/multistage --eval_folder multistage_gn32_v2/eval --config.eval.t_tuples="()" --config.eval.t_converge="(0,)" --config.eval.begin_ckpt=1 --config.eval.end_ckpt=12 --config.eval.batch_size=1024 --config.sampling.steps=20  --config.sampling.eps=1e-4 --config.eval.converge_epoch=8
#torchrun --nproc_per_node=1 --master_port=29601 main_interval.py --config "configs/vp/cifar10_ncsnpp_multistage_serial_deep_continuous.py" --m1 serial  --workdir /scratch/qingqu_root/qingqu1/shared_data/multistage --eval_folder serial/eval --config.eval.t_tuples="()" --config.eval.t_converge="(0,)" --config.eval.begin_ckpt=1 --config.eval.end_ckpt=12 --config.eval.batch_size=1024 --config.sampling.steps=20  --config.sampling.eps=1e-4 --config.eval.converge_epoch=8
torchrun --nproc_per_node=1 --master_port=29601 main_interval.py --config "configs/vp/cifar10_ncsnpp_multistage_deep_continuous_4stage_v1.py" --m1 something  --workdir /scratch/qingqu_root/qingqu1/shared_data/multistage --eval_folder something/i1 --config.eval.t_tuples="(0.376, 0.526)" --config.eval.t_converge="(1,0,1)" --config.eval.begin_ckpt=1 --config.eval.end_ckpt=12 --config.eval.batch_size=1024 --config.sampling.steps=20  --config.sampling.eps=1e-4 --config.eval.converge_epoch=8
python evaluation_fromsample.py --config "configs/vp/cifar10_ncsnpp_multistage_deep_continuous_4stage_v1.py" --workdir /scratch/qingqu_root/qingqu1/shared_data/multistage --eval_folder something/i1 --config.eval.begin_ckpt=1 --config.eval.end_ckpt=12 --config.eval.batch_size=1024